<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <script src="../../@webcomponents/webcomponentsjs/webcomponents-loader.js"></script>
    <script src="../../wct-browser-legacy/browser.js"></script>
    <!-- import the element to test -->
    <script type="module" src="../src/mammooc-rating-widget.js"></script>
  </head>
  <body>
      <test-fixture id="show-all">
        <template>
          <mammooc-rating-widget provider="test-provider" course-id="42">
          </mammooc-rating-widget>
        </template>
      </test-fixture>
      <test-fixture id="disable-all">
        <template>
          <mammooc-rating-widget provider="test-provider" course-id="42" disable-rating disable-evaluations disable-evaluation-form>
          </mammooc-rating-widget>
        </template>
      </test-fixture>
      <test-fixture id="disable-rating">
        <template>
          <mammooc-rating-widget provider="test-provider" course-id="42" disable-rating>
          </mammooc-rating-widget>
        </template>
      </test-fixture>
      <test-fixture id="disable-evaluations">
        <template>
          <mammooc-rating-widget provider="test-provider" course-id="42" disable-evaluations>
          </mammooc-rating-widget>
        </template>
      </test-fixture>
      <test-fixture id="disable-evaluation-form">
        <template>
          <mammooc-rating-widget provider="test-provider" course-id="42" disable-evaluation-form>
          </mammooc-rating-widget>
        </template>
      </test-fixture>
    <script type="module">
      import '../src/mammooc-rating-widget.js';
      suite('<mammooc-rating-widget>', function() {
          let showAllFixture,
              disableAllFixture,
              disableRatingFixture,
              disableEvaluationsFixture,
              disableEvaluationFormFixture;
          setup(function() {
          showAllFixture = fixture('show-all');
          disableAllFixture = fixture('disable-all');
          disableRatingFixture = fixture('disable-rating');
          disableEvaluationsFixture = fixture('disable-evaluations');
          disableEvaluationFormFixture = fixture('disable-evaluation-form');
        });
        test('by default all elements are shown', function() {
          showAllFixture.addEventListener('data-loaded', function(event) {
              const ratingElement = showAllFixture.getElementsByTagName('mammooc-cumulative-rating')[0],
                    evaluationElement = showAllFixture.getElementsByTagName('mammooc-course-evaluation')[0],
                    evaluationFormElement = showAllFixture.getElementsByTagName('mammooc-course-evaluation-form')[0];
              assert.isOk(ratingElement);
              assert.isOk(evaluationElement);
              assert.isOk(evaluationFormElement);
          });

        });
        test('all elements can be disabled', function() {
          showAllFixture.addEventListener('data-loaded', function(event) {
            const ratingElement = disableAllFixture.getElementsByTagName('mammooc-cumulative-rating')[0],
                  evaluationElement = disableAllFixture.getElementsByTagName('mammooc-course-evaluation')[0],
                  evaluationFormElement = disableAllFixture.getElementsByTagName('mammooc-course-evaluation-form')[0];
            assert.isNotOk(ratingElement);
            assert.isNotOk(evaluationElement);
            assert.isNotOk(evaluationFormElement);
          });
        });
        test('only the rating element can be disabled', function() {
          showAllFixture.addEventListener('data-loaded', function(event) {
            const ratingElement = disableRatingFixture.getElementsByTagName('mammooc-cumulative-rating')[0],
                  evaluationElement = disableRatingFixture.getElementsByTagName('mammooc-course-evaluation')[0],
                  evaluationFormElement = disableRatingFixture.getElementsByTagName('mammooc-course-evaluation-form')[0];
            assert.isNotOk(ratingElement);
            assert.isOk(evaluationElement);
            assert.isOk(evaluationFormElement);
          });
        });
        test('only the evualtions element can be disabled', function() {
          showAllFixture.addEventListener('data-loaded', function(event) {
            const ratingElement = disableEvaluationsFixture.getElementsByTagName('mammooc-cumulative-rating')[0],
                  evaluationElement = disableEvaluationsFixture.getElementsByTagName('mammooc-course-evaluation')[0],
                  evaluationFormElement = disableEvaluationsFixture.getElementsByTagName('mammooc-course-evaluation-form')[0];
            assert.isOk(ratingElement);
            assert.isNotOk(evaluationElement);
            assert.isOk(evaluationFormElement);
          });
        });
        test('only the rating evaluation form element can be disabled', function() {
          showAllFixture.addEventListener('data-loaded', function(event) {
            const ratingElement = disableEvaluationFormFixture.getElementsByTagName('mammooc-cumulative-rating')[0],
                  evaluationElement = disableEvaluationFormFixture.getElementsByTagName('mammooc-course-evaluation')[0],
                  evaluationFormElement = disableEvaluationFormFixture.getElementsByTagName('mammooc-course-evaluation-form')[0];
            assert.isOk(ratingElement);
            assert.isOk(evaluationElement);
            assert.isNotOk(evaluationFormElement);
          });
        });
      });
    </script>
  </body>
</html>
